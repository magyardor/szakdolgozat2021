(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{HqHl:function(t,e,i){"use strict";i.r(e),i.d(e,"ProductsListModule",function(){return W});var c=i("ofXK"),n=i("3Pt+"),o=i("tyNb"),r=i("PCNd"),a=i("+0xr"),s=i("fXoL"),l=i("MzpT"),d=i("M9IT"),u=i("bTqV"),b=i("STbY"),m=i("Qu3c"),p=i("sYmb");const g=["paginator"];function h(t,e){1&t&&(s.Ub(0,"th",14),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.ID")))}function f(t,e){if(1&t&&(s.Ub(0,"td",15),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(t.id)}}function D(t,e){1&t&&(s.Ub(0,"th",14),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.NAME")))}function T(t,e){if(1&t&&(s.Ub(0,"td",15),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(t.name)}}function v(t,e){1&t&&(s.Ub(0,"th",14),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.DESCRIPTION")))}function P(t,e){if(1&t&&(s.Ub(0,"td",15),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(t.description)}}function I(t,e){1&t&&(s.Ub(0,"th",14),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.PRICE")))}function C(t,e){if(1&t&&(s.Ub(0,"td",15),s.Hc(1),s.gc(2,"currency"),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(s.kc(2,1,t.price,"HUF","symbol","4.0"))}}function O(t,e){1&t&&(s.Ub(0,"th",14),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.IMAGE")))}function U(t,e){if(1&t&&(s.Ub(0,"td",15),s.Ub(1,"div",16),s.Pb(2,"img",17),s.Tb(),s.Tb()),2&t){const t=e.$implicit;s.Db(2),s.oc("src",t.imagePath,s.Ac)("alt",t.name)}}function M(t,e){1&t&&(s.Ub(0,"th",14),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.MENU")))}function w(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",15),s.Ub(1,"button",18),s.Hc(2,"..."),s.Tb(),s.Ub(3,"mat-menu",19,20),s.Ub(5,"button",21),s.bc("click",function(){s.zc(t);const i=e.$implicit;return s.fc().onModify(i.id)}),s.Ub(6,"span",22),s.Hc(7," edit "),s.Tb(),s.Hc(8),s.gc(9,"translate"),s.Tb(),s.Ub(10,"button",23),s.bc("click",function(){s.zc(t);const i=e.$implicit;return s.fc().onDelete(i.id)}),s.Ub(11,"span",22),s.Hc(12," delete "),s.Tb(),s.Hc(13),s.gc(14,"translate"),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=s.wc(4);s.Db(1),s.oc("matMenuTriggerFor",t),s.Db(7),s.Jc(" ",s.hc(9,3,"GENERIC.ACTION.EDIT")," "),s.Db(5),s.Jc(" ",s.hc(14,5,"GENERIC.ACTION.DELETE")," ")}}function F(t,e){1&t&&s.Pb(0,"tr",24)}function R(t,e){1&t&&s.Pb(0,"tr",25)}const y=function(){return[4,10,15]};let S=(()=>{class t{constructor(t,e){this.prodService=t,this.router=e,this.displayedColumns=["id","name","description","price","image","menu"],this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.prodService.getProducts(),this.productsSub=this.prodService.getprodUpdatedListener().subscribe(t=>{this.isLoading=!1,this.products=new a.k(t),this.products.paginator=this.paginator})}onModify(t){this.router.navigateByUrl("/admin/products-list/edit-products/"+t)}onDelete(t){this.prodService.deleteProducts(t)}ngOnDestroy(){this.productsSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(l.a),s.Ob(o.c))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-products-list"]],viewQuery:function(t,e){if(1&t&&s.Mc(g,1),2&t){let t;s.vc(t=s.cc())&&(e.paginator=t.first)}},decls:24,vars:5,consts:[[1,"mat-elevation-z8","box-shadow"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","price"],["matColumnDef","image"],["matColumnDef","menu"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[1,"prod-image"],[3,"src","alt"],["mat-button","",3,"matMenuTriggerFor"],[1,"btn-main"],["menu","matMenu"],["mat-menu-item","","matTooltip","Edit this product",3,"click"],[1,"material-icons"],["mat-menu-item","","matTooltip","Delete this product",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"table",1),s.Sb(2,2),s.Fc(3,h,3,3,"th",3),s.Fc(4,f,2,1,"td",4),s.Rb(),s.Sb(5,5),s.Fc(6,D,3,3,"th",3),s.Fc(7,T,2,1,"td",4),s.Rb(),s.Sb(8,6),s.Fc(9,v,3,3,"th",3),s.Fc(10,P,2,1,"td",4),s.Rb(),s.Sb(11,7),s.Fc(12,I,3,3,"th",3),s.Fc(13,C,3,6,"td",4),s.Rb(),s.Sb(14,8),s.Fc(15,O,3,3,"th",3),s.Fc(16,U,3,2,"td",4),s.Rb(),s.Sb(17,9),s.Fc(18,M,3,3,"th",3),s.Fc(19,w,15,7,"td",4),s.Rb(),s.Fc(20,F,1,0,"tr",10),s.Fc(21,R,1,0,"tr",11),s.Tb(),s.Pb(22,"mat-paginator",12,13),s.Tb()),2&t&&(s.Db(1),s.oc("dataSource",e.products),s.Db(19),s.oc("matHeaderRowDef",e.displayedColumns),s.Db(1),s.oc("matRowDefColumns",e.displayedColumns),s.Db(1),s.oc("pageSizeOptions",s.qc(4,y)))},directives:[a.j,a.c,a.e,a.b,a.g,a.i,d.a,a.d,a.a,u.a,b.d,b.a,b.b,m.a,a.f,a.h],pipes:[p.b,c.d],styles:[".prod-image[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.prod-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20%}mat-menu-item[_ngcontent-%COMP%]{display:flex!important;align-items:center!important}table[_ngcontent-%COMP%]{background-color:var(--white-color)!important;width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--light-color);border:1px solid var(--light-color);color:var(--white-color)!important}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--light-color);color:var(--light-color)!important}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--input-color)}"]}),t})();var _=i("mrSG"),L=i("dMKd"),H=i("Qd3B"),A=i("hq03"),E=i("Wp6s"),G=i("Xa2L"),k=i("kmnG"),N=i("qFsG"),q=i("d3UM"),x=i("FKr1");function V(t,e){1&t&&s.Pb(0,"mat-spinner")}function z(t,e){1&t&&(s.Ub(0,"mat-error"),s.Hc(1,"Please enter a products name."),s.Tb())}function B(t,e){if(1&t&&(s.Ub(0,"div",18),s.Pb(1,"img",19),s.Tb()),2&t){const t=s.fc(2);s.Db(1),s.oc("src",t.imagePreview,s.Ac)("alt",t.form.value.name)}}function $(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.oc("value",t.id),s.Db(1),s.Ic(t.name)}}function j(t,e){1&t&&(s.Ub(0,"mat-error"),s.Hc(1,"Please enter a products description."),s.Tb())}function J(t,e){1&t&&(s.Ub(0,"mat-error"),s.Hc(1,"Please enter a products price."),s.Tb())}function K(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",3),s.bc("submit",function(){return s.zc(t),s.fc().onAddProducts()}),s.Ub(1,"div"),s.Ub(2,"h2",4),s.Hc(3),s.gc(4,"translate"),s.Tb(),s.Tb(),s.Ub(5,"mat-form-field",5),s.Ub(6,"mat-label"),s.Hc(7),s.gc(8,"translate"),s.Tb(),s.Pb(9,"input",6),s.Fc(10,z,2,0,"mat-error",1),s.Tb(),s.Ub(11,"div"),s.Ub(12,"button",7),s.bc("click",function(){return s.zc(t),s.wc(16).click()}),s.Hc(13),s.gc(14,"translate"),s.Tb(),s.Ub(15,"input",8,9),s.bc("change",function(e){return s.zc(t),s.fc().onImagePicked(e)}),s.Tb(),s.Tb(),s.Fc(17,B,2,2,"div",10),s.Ub(18,"mat-form-field",5),s.Ub(19,"mat-label"),s.Hc(20),s.gc(21,"translate"),s.Tb(),s.Ub(22,"mat-select",11),s.Fc(23,$,2,2,"mat-option",12),s.Tb(),s.Tb(),s.Ub(24,"mat-form-field",5),s.Ub(25,"mat-label"),s.Hc(26),s.gc(27,"translate"),s.Tb(),s.Pb(28,"textarea",13),s.Fc(29,j,2,0,"mat-error",1),s.Tb(),s.Ub(30,"mat-form-field",14),s.Ub(31,"mat-label"),s.Hc(32),s.gc(33,"translate"),s.Tb(),s.Pb(34,"input",15),s.Ub(35,"span",16),s.Hc(36,"Ft"),s.Tb(),s.Fc(37,J,2,0,"mat-error",1),s.Tb(),s.Ub(38,"button",17),s.Hc(39),s.gc(40,"translate"),s.Tb(),s.Tb()}if(2&t){const t=s.fc();let e=null,i=null,c=null,n=null;s.oc("formGroup",t.form),s.Db(3),s.Ic(s.hc(4,13,"FORM.ADD_PRODUCTS.TITLE")),s.Db(4),s.Ic(s.hc(8,15,"FORM.ADD_PRODUCTS.NAME")),s.Db(3),s.oc("ngIf",null==(e=t.form.get("name"))?null:e.invalid),s.Db(3),s.Ic(s.hc(14,17,"FORM.ADD_PRODUCTS.PICK_IMAGE")),s.Db(4),s.oc("ngIf",""!==t.imagePreview&&t.imagePreview&&(null==(i=t.form.get("image"))?null:i.valid)),s.Db(3),s.Ic(s.hc(21,19,"FORM.ADD_PRODUCTS.PRODUCTS_GROUP")),s.Db(3),s.oc("ngForOf",t.groupList),s.Db(3),s.Ic(s.hc(27,21,"FORM.ADD_PRODUCTS.DESCRIPTION")),s.Db(3),s.oc("ngIf",null==(c=t.form.get("description"))?null:c.invalid),s.Db(3),s.Ic(s.hc(33,23,"FORM.ADD_PRODUCTS.PRICE")),s.Db(5),s.oc("ngIf",null==(n=t.form.get("price"))?null:n.invalid),s.Db(2),s.Ic(s.hc(40,25,"GENERIC.ACTION.SAVE"))}}let Q=(()=>{class t{constructor(t,e,i,c){this.productsService=t,this.group=e,this.route=i,this.alertService=c,this.isLoading=!1,this.groupList=[],this.mode="create"}ngOnInit(){this.getGroupList(),this.form=new n.g({name:new n.e(null,{validators:[n.s.required,n.s.minLength(3)]}),description:new n.e(null,{validators:[n.s.required]}),image:new n.e(null,{validators:[n.s.required],asyncValidators:[L.a]}),price:new n.e(null,{validators:[n.s.required]}),productsGroup:new n.e(null,{validators:[n.s.required]})}),this.route.paramMap.subscribe(t=>{t.has("productsId")?(this.mode="edit",this.productsId=t.get("productsId"),this.isLoading=!0,this.productsService.getProduct(this.productsId).subscribe(t=>{this.isLoading=!1,this.products={id:t._id,name:t.name,description:t.description,imagePath:t.imagePath,price:t.price,productsGroup:t.productsGroup},this.form.setValue({name:this.products.name,description:this.products.description,image:this.products.imagePath,price:this.products.price,productsGroup:this.products.productsGroup})})):(this.mode="create",this.productsId="")})}getGroupList(){return Object(_.a)(this,void 0,void 0,function*(){yield this.group.getGroups(),this.groupSub=this.group.getgroupUpdatedListener().subscribe(t=>{this.groupList=t})})}onImagePicked(t){var e;const i=t.target.files[0];this.form.patchValue({image:i}),null===(e=this.form.get("image"))||void 0===e||e.updateValueAndValidity();const c=new FileReader;c.onload=()=>{this.imagePreview=c.result},c.readAsDataURL(i)}onAddProducts(){if(this.form.invalid)return this.alertService.warn("ALERT.WARN.INVALID_FORM"),this.form.markAllAsTouched(),void(this.isLoading=!1);this.isLoading=!0,"create"===this.mode?this.productsService.addProducts(this.form.value.name,this.form.value.description,this.form.value.image,this.form.value.price,this.form.value.productsGroup):this.productsService.updateProducts(this.productsId,this.form.value.name,this.form.value.description,this.form.value.image,this.form.value.price,this.form.value.productsGroup),this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(l.a),s.Ob(H.a),s.Ob(o.a),s.Ob(A.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-add-products"]],decls:3,vars:2,consts:[[1,"secondary-box-shadow"],[4,"ngIf"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[2,"color","white"],["appearance","outline"],["matInput","","type","text","formControlName","name","placeholder","Name"],["mat-stroked-button","","type","button",1,"btn-secondary",3,"click"],["type","file",3,"change"],["filePicker",""],["class","image-preview",4,"ngIf"],["formControlName","productsGroup"],[3,"value",4,"ngFor","ngForOf"],["matInput","","rows","4","formControlName","description","placeholder","Description"],["appearance","outline",1,"input-group"],["matInput","","type","number","formControlName","price","placeholder","Price"],[1,"input-group-text"],["mat-raised-button","","type","submit",1,"btn-secondary"],[1,"image-preview"],[3,"src","alt"],[3,"value"]],template:function(t,e){1&t&&(s.Ub(0,"mat-card",0),s.Fc(1,V,1,0,"mat-spinner",1),s.Fc(2,K,41,27,"form",2),s.Tb()),2&t&&(s.Db(1),s.oc("ngIf",e.isLoading),s.Db(1),s.oc("ngIf",!e.isLoading))},directives:[E.a,c.m,G.b,n.t,n.n,n.h,k.c,k.f,N.b,n.c,n.m,n.f,u.a,q.a,c.l,n.p,k.b,x.m],pipes:[p.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}"]}),t})();const X=[{path:"",component:S},{path:"add-products",component:Q},{path:"edit-products/:productsId",component:Q}];let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[c.c,r.a,n.i,n.q,o.f.forChild(X)],o.f]}),t})()}}]);