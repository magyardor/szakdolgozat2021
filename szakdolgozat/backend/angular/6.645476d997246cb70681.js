(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{HqHl:function(t,e,i){"use strict";i.r(e),i.d(e,"ProductsListModule",function(){return X});var n=i("ofXK"),c=i("3Pt+"),o=i("tyNb"),r=i("PCNd"),a=i("fXoL"),s=i("MzpT"),l=i("+0xr"),d=i("M9IT"),u=i("bTqV"),b=i("STbY"),m=i("sYmb");function p(t,e){1&t&&(a.Ub(0,"th",13),a.Hc(1),a.gc(2,"translate"),a.Tb()),2&t&&(a.Db(1),a.Ic(a.hc(2,1,"TABLE.ID")))}function g(t,e){if(1&t&&(a.Ub(0,"td",14),a.Hc(1),a.Tb()),2&t){const t=e.$implicit;a.Db(1),a.Ic(t.id)}}function h(t,e){1&t&&(a.Ub(0,"th",13),a.Hc(1),a.gc(2,"translate"),a.Tb()),2&t&&(a.Db(1),a.Ic(a.hc(2,1,"TABLE.NAME")))}function f(t,e){if(1&t&&(a.Ub(0,"td",14),a.Hc(1),a.Tb()),2&t){const t=e.$implicit;a.Db(1),a.Ic(t.name)}}function D(t,e){1&t&&(a.Ub(0,"th",13),a.Hc(1),a.gc(2,"translate"),a.Tb()),2&t&&(a.Db(1),a.Ic(a.hc(2,1,"TABLE.DESCRIPTION")))}function T(t,e){if(1&t&&(a.Ub(0,"td",14),a.Hc(1),a.Tb()),2&t){const t=e.$implicit;a.Db(1),a.Ic(t.description)}}function P(t,e){1&t&&(a.Ub(0,"th",13),a.Hc(1),a.gc(2,"translate"),a.Tb()),2&t&&(a.Db(1),a.Ic(a.hc(2,1,"TABLE.PRICE")))}function v(t,e){if(1&t&&(a.Ub(0,"td",14),a.Hc(1),a.gc(2,"currency"),a.Tb()),2&t){const t=e.$implicit;a.Db(1),a.Ic(a.kc(2,1,t.price,"HUF","symbol","4.0"))}}function I(t,e){1&t&&(a.Ub(0,"th",13),a.Hc(1),a.gc(2,"translate"),a.Tb()),2&t&&(a.Db(1),a.Ic(a.hc(2,1,"TABLE.IMAGE")))}function C(t,e){if(1&t&&(a.Ub(0,"td",14),a.Ub(1,"div",15),a.Pb(2,"img",16),a.Tb(),a.Tb()),2&t){const t=e.$implicit;a.Db(2),a.oc("src",t.imagePath,a.Ac)("alt",t.name)}}function O(t,e){1&t&&(a.Ub(0,"th",13),a.Hc(1),a.gc(2,"translate"),a.Tb()),2&t&&(a.Db(1),a.Ic(a.hc(2,1,"TABLE.MENU")))}function U(t,e){if(1&t){const t=a.Vb();a.Ub(0,"td",14),a.Ub(1,"button",17),a.Hc(2,"..."),a.Tb(),a.Ub(3,"mat-menu",18,19),a.Ub(5,"button",20),a.bc("click",function(){a.zc(t);const i=e.$implicit;return a.fc().onModify(i.id)}),a.Ub(6,"span",21),a.Hc(7," edit "),a.Tb(),a.Hc(8),a.gc(9,"translate"),a.Tb(),a.Ub(10,"button",20),a.bc("click",function(){a.zc(t);const i=e.$implicit;return a.fc().onDelete(i.id)}),a.Ub(11,"span",21),a.Hc(12," delete "),a.Tb(),a.Hc(13),a.gc(14,"translate"),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=a.wc(4);a.Db(1),a.oc("matMenuTriggerFor",t),a.Db(7),a.Jc(" ",a.hc(9,3,"GENERIC.ACTION.EDIT")," "),a.Db(5),a.Jc(" ",a.hc(14,5,"GENERIC.ACTION.DELETE")," ")}}function M(t,e){1&t&&a.Pb(0,"tr",22)}function w(t,e){1&t&&a.Pb(0,"tr",23)}const F=function(){return[5,10,20]};let R=(()=>{class t{constructor(t,e){this.prodService=t,this.router=e,this.displayedColumns=["id","name","description","price","image","menu"],this.products=[],this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.prodService.getProducts(),this.productsSub=this.prodService.getprodUpdatedListener().subscribe(t=>{this.isLoading=!1,this.products=t})}onModify(t){this.router.navigateByUrl("/admin/products-list/edit-products/"+t)}onDelete(t){this.prodService.deleteProducts(t)}ngOnDestroy(){this.productsSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(s.a),a.Ob(o.c))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-products-list"]],decls:23,vars:5,consts:[[1,"mat-elevation-z8","box-shadow"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","price"],["matColumnDef","image"],["matColumnDef","menu"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"prod-image"],[3,"src","alt"],["mat-button","",3,"matMenuTriggerFor"],[1,"btn-main"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Ub(1,"table",1),a.Sb(2,2),a.Fc(3,p,3,3,"th",3),a.Fc(4,g,2,1,"td",4),a.Rb(),a.Sb(5,5),a.Fc(6,h,3,3,"th",3),a.Fc(7,f,2,1,"td",4),a.Rb(),a.Sb(8,6),a.Fc(9,D,3,3,"th",3),a.Fc(10,T,2,1,"td",4),a.Rb(),a.Sb(11,7),a.Fc(12,P,3,3,"th",3),a.Fc(13,v,3,6,"td",4),a.Rb(),a.Sb(14,8),a.Fc(15,I,3,3,"th",3),a.Fc(16,C,3,2,"td",4),a.Rb(),a.Sb(17,9),a.Fc(18,O,3,3,"th",3),a.Fc(19,U,15,7,"td",4),a.Rb(),a.Fc(20,M,1,0,"tr",10),a.Fc(21,w,1,0,"tr",11),a.Tb(),a.Pb(22,"mat-paginator",12),a.Tb()),2&t&&(a.Db(1),a.oc("dataSource",e.products),a.Db(19),a.oc("matHeaderRowDef",e.displayedColumns),a.Db(1),a.oc("matRowDefColumns",e.displayedColumns),a.Db(1),a.oc("pageSizeOptions",a.qc(4,F)))},directives:[l.j,l.c,l.e,l.b,l.g,l.i,d.a,l.d,l.a,u.a,b.d,b.a,b.b,l.f,l.h],pipes:[m.b,n.d],styles:[".prod-image[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.prod-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20%}mat-menu-item[_ngcontent-%COMP%]{display:flex!important;align-items:center!important}table[_ngcontent-%COMP%]{background-color:var(--white-color)!important;width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--light-color);border:1px solid var(--light-color);color:var(--white-color)!important}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--light-color);color:var(--light-color)!important}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--input-color)}"]}),t})();var S=i("mrSG"),y=i("dMKd"),_=i("Qd3B"),L=i("hq03"),H=i("Wp6s"),A=i("Xa2L"),E=i("kmnG"),G=i("qFsG"),N=i("d3UM"),k=i("FKr1");function q(t,e){1&t&&a.Pb(0,"mat-spinner")}function x(t,e){1&t&&(a.Ub(0,"mat-error"),a.Hc(1,"Please enter a products name."),a.Tb())}function V(t,e){if(1&t&&(a.Ub(0,"div",18),a.Pb(1,"img",19),a.Tb()),2&t){const t=a.fc(2);a.Db(1),a.oc("src",t.imagePreview,a.Ac)("alt",t.form.value.name)}}function z(t,e){if(1&t&&(a.Ub(0,"mat-option",20),a.Hc(1),a.Tb()),2&t){const t=e.$implicit;a.oc("value",t.id),a.Db(1),a.Ic(t.name)}}function B(t,e){1&t&&(a.Ub(0,"mat-error"),a.Hc(1,"Please enter a products description."),a.Tb())}function $(t,e){1&t&&(a.Ub(0,"mat-error"),a.Hc(1,"Please enter a products price."),a.Tb())}function j(t,e){if(1&t){const t=a.Vb();a.Ub(0,"form",3),a.bc("submit",function(){return a.zc(t),a.fc().onAddProducts()}),a.Ub(1,"div"),a.Ub(2,"h2",4),a.Hc(3),a.gc(4,"translate"),a.Tb(),a.Tb(),a.Ub(5,"mat-form-field",5),a.Ub(6,"mat-label"),a.Hc(7),a.gc(8,"translate"),a.Tb(),a.Pb(9,"input",6),a.Fc(10,x,2,0,"mat-error",1),a.Tb(),a.Ub(11,"div"),a.Ub(12,"button",7),a.bc("click",function(){return a.zc(t),a.wc(16).click()}),a.Hc(13),a.gc(14,"translate"),a.Tb(),a.Ub(15,"input",8,9),a.bc("change",function(e){return a.zc(t),a.fc().onImagePicked(e)}),a.Tb(),a.Tb(),a.Fc(17,V,2,2,"div",10),a.Ub(18,"mat-form-field",5),a.Ub(19,"mat-label"),a.Hc(20),a.gc(21,"translate"),a.Tb(),a.Ub(22,"mat-select",11),a.Fc(23,z,2,2,"mat-option",12),a.Tb(),a.Tb(),a.Ub(24,"mat-form-field",5),a.Ub(25,"mat-label"),a.Hc(26),a.gc(27,"translate"),a.Tb(),a.Pb(28,"textarea",13),a.Fc(29,B,2,0,"mat-error",1),a.Tb(),a.Ub(30,"mat-form-field",14),a.Ub(31,"mat-label"),a.Hc(32),a.gc(33,"translate"),a.Tb(),a.Pb(34,"input",15),a.Ub(35,"span",16),a.Hc(36,"Ft"),a.Tb(),a.Fc(37,$,2,0,"mat-error",1),a.Tb(),a.Ub(38,"button",17),a.Hc(39),a.gc(40,"translate"),a.Tb(),a.Tb()}if(2&t){const t=a.fc();let e=null,i=null,n=null,c=null;a.oc("formGroup",t.form),a.Db(3),a.Ic(a.hc(4,13,"FORM.ADD_PRODUCTS.TITLE")),a.Db(4),a.Ic(a.hc(8,15,"FORM.ADD_PRODUCTS.NAME")),a.Db(3),a.oc("ngIf",null==(e=t.form.get("name"))?null:e.invalid),a.Db(3),a.Ic(a.hc(14,17,"FORM.ADD_PRODUCTS.PICK_IMAGE")),a.Db(4),a.oc("ngIf",""!==t.imagePreview&&t.imagePreview&&(null==(i=t.form.get("image"))?null:i.valid)),a.Db(3),a.Ic(a.hc(21,19,"FORM.ADD_PRODUCTS.PRODUCTS_GROUP")),a.Db(3),a.oc("ngForOf",t.groupList),a.Db(3),a.Ic(a.hc(27,21,"FORM.ADD_PRODUCTS.DESCRIPTION")),a.Db(3),a.oc("ngIf",null==(n=t.form.get("description"))?null:n.invalid),a.Db(3),a.Ic(a.hc(33,23,"FORM.ADD_PRODUCTS.PRICE")),a.Db(5),a.oc("ngIf",null==(c=t.form.get("price"))?null:c.invalid),a.Db(2),a.Ic(a.hc(40,25,"GENERIC.ACTION.SAVE"))}}let J=(()=>{class t{constructor(t,e,i,n){this.productsService=t,this.group=e,this.route=i,this.alertService=n,this.isLoading=!1,this.groupList=[],this.mode="create"}ngOnInit(){this.getGroupList(),this.form=new c.g({name:new c.e(null,{validators:[c.s.required,c.s.minLength(3)]}),description:new c.e(null,{validators:[c.s.required]}),image:new c.e(null,{validators:[c.s.required],asyncValidators:[y.a]}),price:new c.e(null,{validators:[c.s.required]}),productsGroup:new c.e(null,{validators:[c.s.required]})}),this.route.paramMap.subscribe(t=>{t.has("productsId")?(this.mode="edit",this.productsId=t.get("productsId"),this.isLoading=!0,this.productsService.getProduct(this.productsId).subscribe(t=>{this.isLoading=!1,this.products={id:t._id,name:t.name,description:t.description,imagePath:t.imagePath,price:t.price,productsGroup:t.productsGroup},this.form.setValue({name:this.products.name,description:this.products.description,image:this.products.imagePath,price:this.products.price,productsGroup:this.products.productsGroup})})):(this.mode="create",this.productsId="")})}getGroupList(){return Object(S.a)(this,void 0,void 0,function*(){yield this.group.getGroups(),this.groupSub=this.group.getgroupUpdatedListener().subscribe(t=>{this.groupList=t})})}onImagePicked(t){var e;const i=t.target.files[0];this.form.patchValue({image:i}),null===(e=this.form.get("image"))||void 0===e||e.updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(i)}onAddProducts(){if(this.form.invalid)return this.alertService.warn("ALERT.WARN.INVALID_FORM"),this.form.markAllAsTouched(),void(this.isLoading=!1);this.isLoading=!0,"create"===this.mode?(console.log(this.form.value),this.productsService.addProducts(this.form.value.name,this.form.value.description,this.form.value.image,this.form.value.price,this.form.value.productsGroup)):this.productsService.updateProducts(this.productsId,this.form.value.name,this.form.value.description,this.form.value.image,this.form.value.price,this.form.value.productsGroup),this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(s.a),a.Ob(_.a),a.Ob(o.a),a.Ob(L.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-add-products"]],decls:3,vars:2,consts:[[1,"secondary-box-shadow"],[4,"ngIf"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[2,"color","white"],["appearance","outline"],["matInput","","type","text","formControlName","name","placeholder","Name"],["mat-stroked-button","","type","button",1,"btn-secondary",3,"click"],["type","file",3,"change"],["filePicker",""],["class","image-preview",4,"ngIf"],["formControlName","productsGroup"],[3,"value",4,"ngFor","ngForOf"],["matInput","","rows","4","formControlName","description","placeholder","Description"],["appearance","outline",1,"input-group"],["matInput","","type","number","formControlName","price","placeholder","Price"],[1,"input-group-text"],["mat-raised-button","","type","submit",1,"btn-secondary"],[1,"image-preview"],[3,"src","alt"],[3,"value"]],template:function(t,e){1&t&&(a.Ub(0,"mat-card",0),a.Fc(1,q,1,0,"mat-spinner",1),a.Fc(2,j,41,27,"form",2),a.Tb()),2&t&&(a.Db(1),a.oc("ngIf",e.isLoading),a.Db(1),a.oc("ngIf",!e.isLoading))},directives:[H.a,n.n,A.b,c.t,c.n,c.h,E.c,E.f,G.b,c.c,c.m,c.f,u.a,N.a,n.m,c.p,E.b,k.m],pipes:[m.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}"]}),t})();const K=[{path:"",component:R},{path:"add-products",component:J},{path:"edit-products/:productsId",component:J}];let X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({imports:[[n.c,r.a,c.i,c.q,o.f.forChild(K)],o.f]}),t})()}}]);