(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{D5Wi:function(t,e,n){"use strict";n.r(e),n.d(e,"NewsListModule",function(){return z});var i=n("ofXK"),a=n("3Pt+"),c=n("tyNb"),o=n("PCNd"),r=n("+0xr"),s=n("fXoL"),l=n("Yerg"),b=n("M9IT"),d=n("bTqV"),m=n("STbY"),u=n("Qu3c"),g=n("sYmb");const f=["paginator"];function h(t,e){1&t&&(s.Ub(0,"th",13),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.ID")))}function p(t,e){if(1&t&&(s.Ub(0,"td",14),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(t.id)}}function w(t,e){1&t&&(s.Ub(0,"th",13),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.TITLE")))}function D(t,e){if(1&t&&(s.Ub(0,"td",14),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(t.title)}}function v(t,e){1&t&&(s.Ub(0,"th",13),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.DESCRIPTION")))}function T(t,e){if(1&t&&(s.Ub(0,"td",14),s.Hc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ic(t.description)}}function I(t,e){1&t&&(s.Ub(0,"th",13),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.IMAGE")))}function P(t,e){if(1&t&&(s.Ub(0,"td",14),s.Ub(1,"div",15),s.Pb(2,"img",16),s.Tb(),s.Tb()),2&t){const t=e.$implicit;s.Db(2),s.oc("src",t.imagePath,s.Ac)("alt",t.title)}}function C(t,e){1&t&&(s.Ub(0,"th",13),s.Hc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.Ic(s.hc(2,1,"TABLE.MENU")))}function O(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",14),s.Ub(1,"button",17),s.Hc(2,"..."),s.Tb(),s.Ub(3,"mat-menu",18,19),s.Ub(5,"button",20),s.bc("click",function(){s.zc(t);const n=e.$implicit;return s.fc().onModify(n.id)}),s.Ub(6,"span",21),s.Hc(7," edit "),s.Tb(),s.Hc(8),s.gc(9,"translate"),s.Tb(),s.Ub(10,"button",22),s.bc("click",function(){s.zc(t);const n=e.$implicit;return s.fc().onDelete(n.id)}),s.Ub(11,"span",21),s.Hc(12," delete "),s.Tb(),s.Hc(13),s.gc(14,"translate"),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=s.wc(4);s.Db(1),s.oc("matMenuTriggerFor",t),s.Db(7),s.Jc(" ",s.hc(9,3,"GENERIC.ACTION.EDIT")," "),s.Db(5),s.Jc(" ",s.hc(14,5,"GENERIC.ACTION.DELETE")," ")}}function M(t,e){1&t&&s.Pb(0,"tr",23)}function U(t,e){1&t&&s.Pb(0,"tr",24)}const E=function(){return[4,10,15]};let S=(()=>{class t{constructor(t,e){this.newsService=t,this.router=e,this.displayedColumns=["id","title","description","image","menu"],this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.newsService.getNews(),this.newsSub=this.newsService.getNewsUpdateListener().subscribe(t=>{this.isLoading=!1,this.news=new r.k(t),this.news.paginator=this.paginator})}onModify(t){this.router.navigateByUrl("/admin/news-list/edit/"+t)}onDelete(t){this.newsService.deleteNews(t)}ngOnDestroy(){this.newsSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(l.a),s.Ob(c.c))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-news-list"]],viewQuery:function(t,e){if(1&t&&s.Mc(f,1),2&t){let t;s.vc(t=s.cc())&&(e.paginator=t.first)}},decls:21,vars:5,consts:[[1,"mat-elevation-z8","box-shadow"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","image"],["matColumnDef","menu"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],[3,"src","alt"],["mat-button","",3,"matMenuTriggerFor"],[1,"btn-main"],["menu","matMenu"],["mat-menu-item","","matTooltip","Edit this news",1,"d-flex","align-item-center",3,"click"],[1,"material-icons"],["mat-menu-item","","matTooltip","Delete this news",1,"d-flex","align-item-center",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"table",1),s.Sb(2,2),s.Fc(3,h,3,3,"th",3),s.Fc(4,p,2,1,"td",4),s.Rb(),s.Sb(5,5),s.Fc(6,w,3,3,"th",3),s.Fc(7,D,2,1,"td",4),s.Rb(),s.Sb(8,6),s.Fc(9,v,3,3,"th",3),s.Fc(10,T,2,1,"td",4),s.Rb(),s.Sb(11,7),s.Fc(12,I,3,3,"th",3),s.Fc(13,P,3,2,"td",4),s.Rb(),s.Sb(14,8),s.Fc(15,C,3,3,"th",3),s.Fc(16,O,15,7,"td",4),s.Rb(),s.Fc(17,M,1,0,"tr",9),s.Fc(18,U,1,0,"tr",10),s.Tb(),s.Pb(19,"mat-paginator",11,12),s.Tb()),2&t&&(s.Db(1),s.oc("dataSource",e.news),s.Db(16),s.oc("matHeaderRowDef",e.displayedColumns),s.Db(1),s.oc("matRowDefColumns",e.displayedColumns),s.Db(1),s.oc("pageSizeOptions",s.qc(4,E)))},directives:[r.j,r.c,r.e,r.b,r.g,r.i,b.a,r.d,r.a,d.a,m.d,m.a,m.b,u.a,r.f,r.h],pipes:[g.b],styles:[".post-image[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20%}table[_ngcontent-%COMP%]{background-color:var(--white-color)!important;width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--light-color);border:1px solid var(--light-color);color:var(--white-color)!important}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--light-color);color:var(--light-color)!important}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--input-color)}"]}),t})();var _=n("dMKd"),N=n("hq03"),y=n("Wp6s"),A=n("Xa2L"),L=n("kmnG"),F=n("qFsG"),R=n("iadO");function k(t,e){1&t&&s.Pb(0,"mat-spinner")}function H(t,e){1&t&&(s.Ub(0,"mat-error"),s.Hc(1,"Please enter a post title."),s.Tb())}function x(t,e){if(1&t&&(s.Ub(0,"div",18),s.Pb(1,"img",19),s.Tb()),2&t){const t=s.fc(2);s.Db(1),s.oc("src",t.imagePreview,s.Ac)("alt",t.form.value.title)}}function G(t,e){1&t&&(s.Ub(0,"mat-error"),s.Hc(1,"Please enter a post description."),s.Tb())}function q(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",3),s.bc("submit",function(){return s.zc(t),s.fc().onAddNews()}),s.Ub(1,"div"),s.Ub(2,"h2"),s.Hc(3),s.gc(4,"translate"),s.Tb(),s.Tb(),s.Ub(5,"mat-form-field",4),s.Ub(6,"mat-label"),s.Hc(7),s.gc(8,"translate"),s.Tb(),s.Pb(9,"input",5),s.Fc(10,H,2,0,"mat-error",1),s.Tb(),s.Ub(11,"div"),s.Ub(12,"button",6),s.bc("click",function(){return s.zc(t),s.wc(16).click()}),s.Hc(13),s.gc(14,"translate"),s.Tb(),s.Ub(15,"input",7,8),s.bc("change",function(e){return s.zc(t),s.fc().onImagePicked(e)}),s.Tb(),s.Tb(),s.Fc(17,x,2,2,"div",9),s.Ub(18,"mat-form-field",4),s.Ub(19,"mat-label"),s.Hc(20),s.gc(21,"translate"),s.Tb(),s.Ub(22,"mat-date-range-input",10),s.Pb(23,"input",11),s.Pb(24,"input",12),s.Tb(),s.Pb(25,"mat-datepicker-toggle",13),s.Pb(26,"mat-date-range-picker",14,15),s.Tb(),s.Ub(28,"mat-form-field",4),s.Ub(29,"mat-label"),s.Hc(30),s.gc(31,"translate"),s.Tb(),s.Pb(32,"textarea",16),s.Fc(33,G,2,0,"mat-error",1),s.Tb(),s.Ub(34,"button",17),s.Hc(35),s.gc(36,"translate"),s.Tb(),s.Tb()}if(2&t){const t=s.wc(27),e=s.fc();let n=null,i=null,a=null;s.oc("formGroup",e.form),s.Db(3),s.Ic(s.hc(4,12,"FORM.ADD_NEWS.TITLE")),s.Db(4),s.Ic(s.hc(8,14,"FORM.ADD_NEWS.TITLE_NEWS")),s.Db(3),s.oc("ngIf",null==(n=e.form.get("title"))?null:n.invalid),s.Db(3),s.Ic(s.hc(14,16,"FORM.ADD_NEWS.PICK_IMAGE")),s.Db(4),s.oc("ngIf",""!==e.imagePreview&&e.imagePreview&&(null==(i=e.form.get("image"))?null:i.valid)),s.Db(3),s.Ic(s.hc(21,18,"FORM.ADD_NEWS.DATE_RANGE")),s.Db(2),s.oc("rangePicker",t),s.Db(3),s.oc("for",t),s.Db(5),s.Ic(s.hc(31,20,"FORM.ADD_NEWS.DESCRIPTION")),s.Db(3),s.oc("ngIf",null==(a=e.form.get("description"))?null:a.invalid),s.Db(2),s.Ic(s.hc(36,22,"GENERIC.ACTION.SAVE"))}}let V=(()=>{class t{constructor(t,e,n){this.newsService=t,this.route=e,this.alertService=n,this.isLoading=!1,this.mode="create"}ngOnInit(){this.form=new a.g({title:new a.e(null,{validators:[a.s.required,a.s.minLength(3)]}),description:new a.e(null,{validators:[a.s.required]}),image:new a.e(null,{validators:[a.s.required],asyncValidators:[_.a]}),startDate:new a.e(null,{validators:[a.s.required]}),endDate:new a.e(null,{validators:[a.s.required]})}),this.route.paramMap.subscribe(t=>{t.has("newsId")?(this.mode="edit",this.newsId=t.get("newsId"),this.isLoading=!0,this.newsService.getNew(this.newsId).subscribe(t=>{this.isLoading=!1,this.news={id:t._id,title:t.title,description:t.description,imagePath:t.imagePath,startDate:t.startDate,endDate:t.endDate},this.form.setValue({title:this.news.title,description:this.news.description,image:this.news.imagePath,startDate:this.news.startDate,endDate:this.news.endDate})})):(this.mode="create",this.newsId="")})}onImagePicked(t){var e;const n=t.target.files[0];this.form.patchValue({image:n}),null===(e=this.form.get("image"))||void 0===e||e.updateValueAndValidity();const i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(n)}onAddNews(){if(this.form.invalid)return this.alertService.warn("ALERT.WARN.INVALID_FORM"),this.form.markAllAsTouched(),void(this.isLoading=!1);this.isLoading=!0,"create"===this.mode?this.newsService.addNews(this.form.value.title,this.form.value.description,this.form.value.image,this.form.value.startDate,this.form.value.endDate):this.newsService.updateNews(this.newsId,this.form.value.title,this.form.value.description,this.form.value.image,this.form.value.startDate,this.form.value.endDate),this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(l.a),s.Ob(c.a),s.Ob(N.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-add-news"]],decls:3,vars:2,consts:[[1,"secondary-box-shadow"],[4,"ngIf"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["appearance","outline"],["matInput","","type","text","formControlName","title","placeholder","Title"],["mat-stroked-button","","type","button",1,"btn-secondary",3,"click"],["type","file",3,"change"],["filePicker",""],["class","image-preview",4,"ngIf"],[3,"rangePicker"],["matStartDate","","formControlName","startDate","placeholder","Start date"],["matEndDate","","formControlName","endDate","placeholder","End date"],["matSuffix","",3,"for"],["color","primary"],["picker",""],["matInput","","rows","4","formControlName","description","placeholder","description"],["mat-raised-button","","type","submit",1,"btn-secondary"],[1,"image-preview"],[3,"src","alt"]],template:function(t,e){1&t&&(s.Ub(0,"mat-card",0),s.Fc(1,k,1,0,"mat-spinner",1),s.Fc(2,q,37,24,"form",2),s.Tb()),2&t&&(s.Db(1),s.oc("ngIf",e.isLoading),s.Db(1),s.oc("ngIf",!e.isLoading))},directives:[y.a,i.m,A.b,a.t,a.n,a.h,L.c,L.f,F.b,a.c,a.m,a.f,d.a,R.a,R.f,R.e,R.d,L.g,R.b,L.b],pipes:[g.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}"]}),t})();const W=[{path:"",component:S},{path:"create",component:V},{path:"edit/:newsId",component:V}];let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[i.c,o.a,a.i,a.q,c.f.forChild(W)]]}),t})()}}]);